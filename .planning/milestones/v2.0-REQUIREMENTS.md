# Requirements Archive: v2.0 Performance

**Archived:** 2026-01-28
**Status:** SHIPPED

This is the archived requirements specification for v2.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: v2.0 Performance

**Milestone:** v2.0 Performance
**Created:** 2026-01-26
**Status:** Complete

---

## v2.0 Requirements

### React Query Migration

- [x] **RQ-01**: User experiences fast navigation with automatic data caching (no re-fetch within 5min)
- [x] **RQ-02**: User sees loading states via `isPending` for all data fetches
- [x] **RQ-03**: User sees error states via `isError` with clear feedback
- [x] **RQ-04**: User sees fresh data when returning to app (background refetch on window focus)
- [x] **RQ-05**: User experiences no duplicate network calls when multiple components request same data
- [x] **RQ-06**: User receives confirmation feedback for all mutations (create/update/delete)
- [x] **RQ-07**: User sees lists update immediately after create/edit/delete (query invalidation)
- [x] **RQ-08**: User experiences instant task completion feedback (optimistic updates with rollback)

### Pagination

- [x] **PAG-01**: User can control page size for large lists (clients, check-ins, task history)
- [x] **PAG-02**: User sees loading indicator when changing pages
- [x] **PAG-03**: User sees clear "end of list" indicator when no more data
- [x] **PAG-04**: User experiences fast pagination on large datasets (cursor-based, not offset)
- [x] **PAG-05**: User can scroll continuously to load more items (infinite scroll)

### Render Optimization

- [x] **OPT-01**: User sees skeleton/spinner during data load, not blank screens
- [x] **OPT-02**: User experiences responsive UI during mutations (button loading states)
- [x] **OPT-03**: Developer has profiling data for render performance bottlenecks
- [x] **OPT-04**: User experiences smoother CoachCalendar interactions (selective memoization)

---

## Future Requirements (Deferred)

### React Query Advanced (v2.1+)

- [ ] Prefetching on hover (near-instant navigation)
- [ ] Suspense integration (cleaner loading states)
- [ ] Parallel query optimization

### Pagination Advanced (v2.1+)

- [ ] Page prefetching (next page loads in background)
- [ ] Virtualized lists for 1000+ items

### Render Optimization Advanced (v2.1+)

- [ ] Code-splitting heavy components (lazy loading)
- [ ] useCallback optimization across components

---

## Out of Scope

| Feature | Reason |
|---------|--------|
| Offline support | Complex, not needed for current user base |
| Service worker caching | Adds complexity, defer to PWA milestone |
| useAuth migration to React Query | Uses Supabase auth subscriptions, not query pattern |
| useAIAssistant migration | Has custom retry logic, keep as-is |
| Global state management | React Query handles server state; no need for Redux/Zustand |
| 100% memo coverage | Diminishing returns; profile-driven optimization only |

---

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| RQ-01 | Phase 9 | Complete |
| RQ-02 | Phase 10 | Complete |
| RQ-03 | Phase 10 | Complete |
| RQ-04 | Phase 9 | Complete |
| RQ-05 | Phase 9 | Complete |
| RQ-06 | Phase 12 | Complete |
| RQ-07 | Phase 12 | Complete |
| RQ-08 | Phase 12 | Complete |
| PAG-01 | Phase 13 | Complete |
| PAG-02 | Phase 13 | Complete |
| PAG-03 | Phase 13 | Complete |
| PAG-04 | Phase 13 | Complete |
| PAG-05 | Phase 13 | Complete |
| OPT-01 | Phase 14 | Complete |
| OPT-02 | Phase 14 | Complete |
| OPT-03 | Phase 14 | Complete |
| OPT-04 | Phase 14 | Complete |

---

## Milestone Summary

**Shipped:** 17 of 17 v2.0 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-28 as part of v2.0 milestone completion*
