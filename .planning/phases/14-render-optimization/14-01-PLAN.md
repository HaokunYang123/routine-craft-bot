---
phase: 14-render-optimization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tailwind.config.ts
  - src/components/ui/skeleton.tsx
  - src/components/ui/loading-button.tsx
  - src/components/skeletons/PeopleSkeleton.tsx
  - src/components/skeletons/TemplatesSkeleton.tsx
  - src/components/skeletons/CalendarSkeleton.tsx
  - src/pages/People.tsx
  - src/pages/Templates.tsx
  - src/pages/CoachCalendar.tsx
autonomous: true

must_haves:
  truths:
    - "User sees shimmer animation on skeleton loaders (not pulse)"
    - "User sees skeleton UI during initial data load on People page"
    - "User sees skeleton UI during initial data load on Templates page"
    - "User sees skeleton UI during initial data load on Calendar page"
    - "User sees 'Still working...' text on buttons loading > 2 seconds"
  artifacts:
    - path: "src/components/skeletons/PeopleSkeleton.tsx"
      provides: "Page-level skeleton for People/Groups list"
      min_lines: 20
    - path: "src/components/skeletons/TemplatesSkeleton.tsx"
      provides: "Page-level skeleton for Templates library"
      min_lines: 20
    - path: "src/components/skeletons/CalendarSkeleton.tsx"
      provides: "Page-level skeleton for CoachCalendar"
      min_lines: 20
  key_links:
    - from: "tailwind.config.ts"
      to: "src/components/ui/skeleton.tsx"
      via: "animate-shimmer class"
      pattern: "animate-shimmer"
    - from: "src/pages/People.tsx"
      to: "src/components/skeletons/PeopleSkeleton.tsx"
      via: "isPending check"
      pattern: "isPending.*PeopleSkeleton"
---

<objective>
Add shimmer animation to skeleton loaders and create content-shaped skeletons for all data pages.

Purpose: Users should see polished loading states instead of blank screens during data fetch, improving perceived performance.
Output: Shimmer animation in Tailwind config, enhanced Skeleton component, page-specific skeleton components for People/Templates/Calendar, LoadingButton extended timeout text.
</objective>

<execution_context>
@/Users/haokunyang/.claude/get-shit-done/workflows/execute-plan.md
@/Users/haokunyang/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-render-optimization/14-RESEARCH.md

# Existing skeleton infrastructure
@src/components/ui/skeleton.tsx
@src/components/ui/loading-button.tsx
@src/components/skeletons/DashboardSkeleton.tsx
@tailwind.config.ts

# Pages needing skeletons (reference for layout matching)
@src/pages/People.tsx
@src/pages/Templates.tsx
@src/pages/CoachCalendar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add shimmer animation and enhance Skeleton/LoadingButton</name>
  <files>tailwind.config.ts, src/components/ui/skeleton.tsx, src/components/ui/loading-button.tsx</files>
  <action>
1. In `tailwind.config.ts`, add shimmer keyframes and animation:
   - In `keyframes` object, add:
     ```
     shimmer: {
       '0%': { backgroundPosition: '-200% 0' },
       '100%': { backgroundPosition: '200% 0' },
     },
     ```
   - In `animation` object, add:
     ```
     shimmer: 'shimmer 1.5s ease-in-out infinite',
     ```

2. In `src/components/ui/skeleton.tsx`, replace animate-pulse with shimmer gradient:
   - Change className from "animate-pulse rounded-md bg-muted" to:
     "rounded-md bg-gradient-to-r from-muted via-muted/60 to-muted bg-[length:200%_100%] animate-shimmer"
   - Keep existing props interface unchanged

3. In `src/components/ui/loading-button.tsx`, add extended timeout text:
   - Add useState for `showExtended` (default false)
   - Add useEffect that:
     - Resets showExtended to false when isLoading becomes false
     - Sets 2-second timeout to set showExtended=true when isLoading is true
     - Cleans up timeout on unmount
   - Change children render to: `{isLoading && showExtended ? "Still working..." : children}`
   - Import useState, useEffect from React
  </action>
  <verify>
- Run `npm run build` - no TypeScript errors
- Visually inspect: skeleton.tsx uses animate-shimmer class
- Visually inspect: loading-button.tsx has useState for showExtended with 2000ms timeout
  </verify>
  <done>
- Tailwind config has shimmer keyframes and animation
- Skeleton component uses shimmer gradient animation
- LoadingButton shows "Still working..." after 2 seconds of loading
  </done>
</task>

<task type="auto">
  <name>Task 2: Create content-shaped skeletons for People, Templates, Calendar</name>
  <files>src/components/skeletons/PeopleSkeleton.tsx, src/components/skeletons/TemplatesSkeleton.tsx, src/components/skeletons/CalendarSkeleton.tsx</files>
  <action>
Create three new skeleton components that match actual page layouts:

1. `PeopleSkeleton.tsx`:
   - Import Skeleton from ui/skeleton, Card/CardHeader/CardContent from ui/card
   - Create GroupCardSkeleton sub-component:
     - Card with CardHeader containing h-5 w-32 skeleton (name) and h-4 w-4 skeleton (chevron)
     - CardContent with h-4 w-24 skeleton (member count)
   - Export PeopleSkeleton that renders:
     - Header skeleton (h-8 w-48 for title, h-4 w-64 for subtitle)
     - div with space-y-4 containing 3 GroupCardSkeleton components

2. `TemplatesSkeleton.tsx`:
   - Import Skeleton from ui/skeleton, Card/CardHeader/CardContent from ui/card
   - Create TemplateCardSkeleton sub-component:
     - Card with CardHeader: h-5 w-40 skeleton (name), h-3 w-24 skeleton (task count)
     - CardContent: 3 rows of h-4 w-full skeletons for task previews
   - Export TemplatesSkeleton that renders:
     - Header skeleton (h-8 w-56 for title)
     - TabsList skeleton (h-10 w-80)
     - Grid of 4 TemplateCardSkeleton components (grid-cols-1 md:grid-cols-2)

3. `CalendarSkeleton.tsx`:
   - Import Skeleton from ui/skeleton, Card/CardHeader/CardContent from ui/card
   - Export CalendarSkeleton that renders:
     - Header row: h-8 w-32 skeleton (title), h-10 w-48 skeleton (tabs)
     - Card with:
       - CardHeader: h-6 w-40 skeleton (month/year), h-8 w-32 skeleton (nav buttons)
       - CardContent: 7-column grid of 35 h-12 w-full skeletons (calendar cells)
     - Sidebar Card (hidden lg:block):
       - CardHeader: h-6 w-32 skeleton (selected date)
       - CardContent: 3 rows of h-16 skeletons (task cards)
  </action>
  <verify>
- All three files exist and export named components
- `npm run build` passes without errors
- Components import from existing ui/skeleton and ui/card
  </verify>
  <done>
- PeopleSkeleton matches People.tsx layout (header + group cards)
- TemplatesSkeleton matches Templates.tsx layout (header + tabs + template cards)
- CalendarSkeleton matches CoachCalendar.tsx layout (header + calendar grid + sidebar)
  </done>
</task>

<task type="auto">
  <name>Task 3: Wire skeletons to pages during isPending state</name>
  <files>src/pages/People.tsx, src/pages/Templates.tsx, src/pages/CoachCalendar.tsx</files>
  <action>
Wire the new skeletons to their respective pages:

1. In `src/pages/People.tsx`:
   - Import PeopleSkeleton from "@/components/skeletons/PeopleSkeleton"
   - Replace the existing isPending loading state (lines ~273-279) that shows Loader2 with:
     ```
     if (isPending) {
       return <PeopleSkeleton />;
     }
     ```

2. In `src/pages/Templates.tsx`:
   - Import TemplatesSkeleton from "@/components/skeletons/TemplatesSkeleton"
   - Find where `loading` is used from useTemplates hook (line 34: `const { templates, loading, ... }`)
   - Add early return before main render (before line 166):
     ```
     if (loading) {
       return <TemplatesSkeleton />;
     }
     ```

3. In `src/pages/CoachCalendar.tsx`:
   - Import CalendarSkeleton from "@/components/skeletons/CalendarSkeleton"
   - Replace the existing loading state (lines ~323-329) that shows Loader2 with:
     ```
     if (loading && tasks.length === 0) {
       return <CalendarSkeleton />;
     }
     ```
  </action>
  <verify>
- `npm run build` passes without errors
- `npm test` passes (all 240 tests)
- Each page imports and uses its skeleton component
- Grep confirms: PeopleSkeleton in People.tsx, TemplatesSkeleton in Templates.tsx, CalendarSkeleton in CoachCalendar.tsx
  </verify>
  <done>
- People page shows PeopleSkeleton during initial load
- Templates page shows TemplatesSkeleton during initial load
- CoachCalendar page shows CalendarSkeleton during initial load
- All tests pass
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Build verification: `npm run build` completes without errors
2. Test verification: `npm test` - all 240 tests pass
3. File existence check:
   - `ls src/components/skeletons/*.tsx` shows PeopleSkeleton, TemplatesSkeleton, CalendarSkeleton
4. Animation verification:
   - tailwind.config.ts contains "shimmer" in keyframes and animation sections
5. Integration verification:
   - grep -l "PeopleSkeleton" src/pages/People.tsx
   - grep -l "TemplatesSkeleton" src/pages/Templates.tsx
   - grep -l "CalendarSkeleton" src/pages/CoachCalendar.tsx
</verification>

<success_criteria>
- Shimmer animation defined in Tailwind config and used by Skeleton component
- LoadingButton shows "Still working..." text after 2 seconds
- PeopleSkeleton, TemplatesSkeleton, CalendarSkeleton components exist
- Each page shows its skeleton during isPending/loading state
- All 240 tests pass
- Build completes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-render-optimization/14-01-SUMMARY.md`
</output>
